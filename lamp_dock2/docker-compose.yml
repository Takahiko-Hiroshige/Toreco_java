version: '3'

services:

  php:
    build: ./php
    volumes:
      - C:/Users/user/MyDocker/Toreco_PF/lamp_dock2/www:/var/www
    ports:
      - 8080:80
    depends_on:
      - mysql

  mysql:
    image: mysql:5.7 
    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci --innodb-use-native-aio=0
    volumes:
      - C:/Users/user/MyDocker/Toreco_PF/lamp_dock2/db:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=root 
      - MYSQL_DATABASE=sample 
      - MYSQL_USER=testuser 
      - MYSQL_PASSWORD=password
      - "TZ=Asia/Tokyo"
  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    environment:
      - PMA_HOST=mysql
    depends_on:
      - mysql
    ports:
      - 8888:80


# version: '3.7'

# services:
#   mysql:
#     image: mysql:5.7
#     volumes:
#       - db_data:/var/lib/mysql
#     restart: always
#     environment:
#       MYSQL_ROOT_PASSWORD: 'EzkQ4'

#   phpmyadmin:
#     depends_on:
#       - mysql
#     image: phpmyadmin/phpmyadmin
#     environment:
#       PMA_HOST: mysql
#     restart: always
#     ports:
#       - "8080:80"

#   php-apache:
#     build: ./php
#     volumes:
#       - ./htdocs:/var/www/html
#     restart: always
#     ports:
#       - "80:80"
#     depends_on:
#       - mysql

# volumes:
#     db_data: {}